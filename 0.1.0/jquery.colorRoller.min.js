(function(n){n.colorRoller={version:"0.1.0"};n.colorRoller=function(t,i){function r(n,t){var f;n==null&&(n="");t==null&&(t="");var f,i=t.toString(),r=n.toString(),u=r.indexOf(i);return u!=-1?!0:!1}function e(n,t){for(hay=0;hay<t.length;hay++)if(r(t[hay],n))return t[hay]}function o(n,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r="[\\?&]"+t+"=([^&#]*)",u=new RegExp(r),i=u.exec(n);return i==null?"":i[1]}function f(i,r,u){typeof colorRoller=="undefined"&&(colorRoller={});colorRoller[r]={};colorRoller[r].uiHex={};colorRoller[r].cssScope=u;colorRoller[r].cssUrl=i;n.ajax({url:i}).done(function(n){themerollerURL=e("/themeroller/",n.split("*"));for(className in t.urlColorNames)colorRoller[r].uiHex[className]=o(themerollerURL,className);s(r)}).error(function(n,t,i){alert(t+"\n"+i+"\n"+n.responseText)})}function s(u){t.devMode&&(devMarkup='<h1 style="margin:0px;">Theme Name: '+u+"<\/h1>"+('<h2 style="margin:10px 0px;">Theme URL: '+colorRoller[u].cssUrl+"<\/h2><hr />"));cssMarkup="";hoverMarkup="";styleMarkup="";computedStyle="";styleScope=colorRoller[u].cssScope?"."+colorRoller[u].cssScope+" ":"";for(className in t.urlColorNames)hoverMarkup=r(className,"Hover")?":hover ":"",r(className,"bg")?cssMarkup="background-color:#":r(className,"border")?cssMarkup="border: 1px solid #":(r(className,"fc")||r(className,"icon"))&&(cssMarkup="color:#"),computedStyle=styleScope+"."+className+hoverMarkup+" {"+cssMarkup+colorRoller[u].uiHex[className]+";} \n",styleMarkup+=computedStyle,t.devMode&&(devMarkup+='<strong class="'+className+'">Class name: '+className+"<\/strong> <em>"+computedStyle+" <\/em><br /><hr />");n('<style type="text/css" theme="'+u+'">'+styleMarkup+"<\/style>").appendTo("head");t.devMode&&(appendDevMarkup='<div style="padding:20px; margin:20px; background-color:#fff; color: #222; border:1px solid lime;" class="'+colorRoller[u].cssScope+'" rel="colorRollerDev">'+devMarkup+'<textarea style="height:400px; width:99%;">'+styleMarkup+"<\/textarea><\/div>",injAnchor=n('div[rel="devModeAnchor"]').size()>0?n('div[rel="devModeAnchor"]'):n("body"),n('div[rel="colorRollerDev"]').size()>0?n('div[rel="colorRollerDev"]').after(appendDevMarkup):injAnchor.append(appendDevMarkup));typeof i=="function"&&i.call(this)}if(t=jQuery.extend({themeName:"custom-theme",themeUrl:"",devMode:!1,cssScope:"",fetchCSS:"/scripts/0.1.0/fetchCSS.php",urlColorNames:{bgColorHeader:"",borderColorHeader:"",fcHeader:"",iconColorHeader:"",bgColorContent:"",borderColorContent:"",fcContent:"",iconColorContent:"",bgColorDefault:"",borderColorDefault:"",fcDefault:"",iconColorDefault:"",bgColorHover:"",borderColorHover:"",fcHover:"",iconColorHover:"",bgColorActive:"",borderColorActive:"",fcActive:"",iconColorActive:"",bgColorHighlight:"",borderColorHighlight:"",fcHighlight:"",iconColorHighlight:"",bgColorError:"",borderColorError:"",fcError:"",iconColorError:"",bgColorOverlay:"",bgColorShadow:""}},t),themeToSearch=t.themeUrl?t.themeUrl:t.themeName,r(t.themeUrl,"http")){if(t.fetchCSS.toString()!="")fetchCSSurl=t.fetchCSS+"?url="+t.themeUrl;else{alert(' fetchCSS undefined! \n Specify the ABSOLUTE file location of fetchCSS.php in $.colorRoller settings, or add as an option to $.colorRoller() i.e. $.colorRoller({themeUrl:"http://external.com/styles.css",fetchCSS:"/location/to/fetchCSS.php"}); ');return}f(fetchCSSurl,t.themeName,t.cssScope)}else for(var u=0;u<n("link").size();u++)if(cssUrl=n("link:eq("+u+")").attr("href"),r(cssUrl,themeToSearch)){f(cssUrl,themeToSearch,t.cssScope);break}return n.colorRoller.destroy=function(t,i){typeof t=="undefined"?(n("style[theme]").remove(),colorRoller={}):n("style").each(function(){n(this).attr("theme")==t&&(n(this).remove(),delete colorRoller[t])});typeof i=="function"&&i.call(this)},this}})(jQuery);